<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inferno Media Player</title>
    <link rel="stylesheet" href="gui/style.css">
</head>

<body>

    <!----Playlist---->
    <svg id="sidebar-toggle" class="toggle-arrow" viewBox="0 0 24 24" width="35"
        onclick="document.getElementById('sidebar').classList.toggle('hidden'), this.classList.toggle('collapsed');">
        <path d="M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z" />
    </svg>

    <div id="sidebar">
        <div class="sidebar-header">INFERNO</div>
        <div class="menu-controls">
            <div class="volume-box">
                <span>üîä</span>
                <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="1">
            </div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="üîç Search song..." autocomplete="off">
            </div>
        </div>
		
        <div class="sidebar-header" style="padding-top: 20px; font-size: 18px;">LIBRARY</div>
        <div id="favourites-list">
            <!-- Favourite playlists will appear here -->
        </div>
        <div class="menu-item" onclick="openFavModal()">‚ûï Create Favourite</div>

        <div class="sidebar-header" style="padding-top: 20px; font-size: 18px; display: flex; justify-content: space-between; align-items: center;">
            LOCAL FILES
            <span id="back-to-local" style="display: none; cursor: pointer; font-size: 12px; color: #ff4444;" onclick="backToLocalFiles()">‚¨Ö Back</span>
        </div>
        <div id="playlist-loader" class="loader-container" style="display: none;">
            <div class="loader"></div>
            <p style="color: #666; font-size: 0.8em; margin-top: 10px;">Scanning Media...</p>
        </div>
        <div id="playlist"></div>
    </div>

    <!----media display---->
    <div id="main">
        <div id="media-display">
            <img id="cover" src="alt.png" crossorigin="anonymous" style="display:none;" onerror="this.src='alt.png'; this.onerror=null;">
            <video id="video" style="display:none;" crossorigin="anonymous"></video>
        </div>

        <div class="info">
            <h1 id="title">Ready for INFERNO?</h1>
            <p id="details">Select a track from your playlist</p>
        </div>

        <canvas id="visualizer"></canvas>

        <div class="controls">
            <div class="progress-box">
                <span class="time" id="t-cur">-0:00</span>
                <div id="progress-bar">
                    <div id="progress-fill"></div>
                </div>
                <span class="time" id="t-dur">-0:00</span>
            </div>
            <div class="btns">
                <svg class="btn" id="shuffle" viewBox="0 0 24 24"
                    onclick="isShuffle=!isShuffle; this.classList.toggle('active')">
                    <path
                        d="M10.59 9.17L5.41 4 4 5.41l5.17 5.17 1.42-1.41zM14.5 4l2.04 2.04L4 18.59 5.41 20 17.96 7.45 20 9.5V4h-5.5zm.59 11.06l-1.42 1.41L18.59 21l1.41-1.41-5.06-5.06z" />
                </svg>
                <svg class="btn" viewBox="0 0 24 24" onclick="playPrev()">
                    <path d="M6 6h2v12H6zm3.5 6l8.5 6V6z" />
                </svg>
                <svg class="btn play-btn" id="play-trigger" viewBox="0 0 24 24" onclick="togglePlay()">
                    <path id="play-icon" d="M8 5v14l11-7z" />
                </svg>
                <svg class="btn" viewBox="0 0 24 24" onclick="playNext()">
                    <path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z" />
                </svg>
                <svg class="btn" id="loop" viewBox="0 0 24 24"
                    onclick="isLoop=!isLoop; this.classList.toggle('active')">
                    <path d="M7 7h10v3l4-4-4-4v3H5v6h2V7zm10 10H7v-3l-4 4 4 4v-3h12v-6h-2v4z" />
                </svg>
                <svg class="random" id="randomsong" viewBox="0 0 24 24" onclick="randomSong()">
                    <path
                        d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM7 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm10 10c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm-5-5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm5-5c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM7 19c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z" />
                </svg>
            </div>
        </div>
        <div class="flames"></div>
    </div>

    <!----menu---->
    <svg class="burger" viewBox="0 0 24 24" width="35"
        onclick="document.getElementById('menu').classList.toggle('menu-open')">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
    </svg>
    <div id="menu">
        <div class="menu-header">MENU</div>

        <div class="menu-item toggle-item align">
            <!-- Visualizer Toggle -->
            <span>Visualizer</span>
            <label class="switch">
                <input type="checkbox" id="visualizer-toggle" checked onchange="toggleVisualizer(this.checked)">
                <span class="slider"></span>
            </label>
        </div>

        <div class="menu-item toggle-item align">
            <!-- Dynamic Color Toggle -->
            <span>Dynamic color</span>
            <label class="switch">
                <input type="checkbox" id="dynamic-color-toggle" checked onchange="toggleDynamicColor(this.checked)">
                <span class="slider"></span>
            </label>
        </div>

        <div class="menu-controls">
            <div class="menu-item" onclick="changeFolder()">üìÅ choose folder</div>
            <div class="menu-item" onclick="manualFile()">üìÑ open file</div>
        </div>
        <div class="menu-item" onclick="openDownloader()">üî• Song Downloader</div>
        <div id="dl-modal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeDownloader()">&times;</span>
                <h2>INFERNO DOWNLOADER</h2>
                <div class="dl-search-group">
                    <input type="text" id="dl-input" placeholder="Enter song name or YouTube link...">
                    <button onclick="searchYT()">Search</button>
                </div>

                <div id="dl-results"></div>

                <div id="dl-step-2" style="display:none;">
                    <p id="selected-song-name"></p>
                    <label class="container">Detailed Version (Spotify Metadata)
                        <input type="checkbox" class="checkbox" id="dl-spotify">
                        <span class="checkmark"></span>
                    </label>
                    <button class="dl-confirm-btn" id="start-dl-btn">DOWNLOAD NOW</button>
                </div>

                <div id="dl-status"></div>
            </div>
        </div>
    </div>
<!-- Modal for creating Favourites -->
    <div id="fav-modal" class="modal">
        <div class="modal-content" style="max-width: 400px;">
            <span class="close" onclick="closeFavModal()">&times;</span>
            <h2 style="color: var(--red);">NEW FAVOURITE</h2>
            <input type="text" id="fav-name-input" placeholder="Playlist Name..." style="width: 100%; padding: 10px; margin-bottom: 15px; background: #111; border: 1px solid #444; color: white;">
            <div id="fav-image-preview" onclick="selectFavImage()" style="width: 100%; height: 150px; border: 2px dashed #444; display: flex; align-items: center; justify-content: center; cursor: pointer; margin-bottom: 15px; background-size: cover; background-position: center;">
                Click to add Cover
            </div>
            <button class="dl-confirm-btn" style="width: 100%;" onclick="createNewFavourite()">CREATE</button>
        </div>
    </div>
</div>


    <audio id="audio" crossorigin="auto"></audio>

    <script src="app/visualizer.js"></script>
    <script src="app/playlist.js"></script>
    <script src="app/player.js"></script>
    <script src="app/favourites.js"></script>
    <script src="app/downloader.js"></script>
</body>

</html>